{% extends "base.html" %}
{% load i18n %}

{% block content %}
<div class="container mx-auto p-4 md:p-8">

  <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
  {% if search_query %}
    <div class="text-center mb-6">
      <p class="text-gray-300">
        {% if news_list %}
          {% blocktrans with query=search_query %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è "{{ query }}"{% endblocktrans %}
        {% else %}
          {% blocktrans with query=search_query %}–ü–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ{% endblocktrans %}
        {% endif %}
      </p>
    </div>
  {% endif %}

  <!-- –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é -->
  {% include "includes/messages.html" %}

  <!-- –°–µ–∫—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
  <div class="category-section mb-8">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" -->
    <div class="category-title-wrapper text-center mb-4">
      <h2 class="category-title">{% trans "–í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" %}</h2>
    </div>

    <!-- –§–∏–ª—å—Ç—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π -->
    <div class="category-filter flex flex-wrap justify-center gap-3 md:gap-4">
      <a href="{% url 'news_list' %}{% if search_query %}?search={{ search_query }}{% endif %}"
         class="category-button {% if not request.GET.category %}active-category{% endif %}">
        üåê {% trans "–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" %}
      </a>
      {% for category in categories %}
        <a href="?{% if search_query %}search={{ search_query }}&{% endif %}category={{ category.id }}"
           class="category-button {% if request.GET.category == category.id|stringformat:'s' %}active-category{% endif %}">
          {{ category.icon|default:'üè∑Ô∏è' }} {{ category.name }}
        </a>
      {% empty %}
        <p class="text-center text-gray-400">{% trans "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã" %}</p>
      {% endfor %}
    </div>
  </div>

  <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π -->
  {% include "includes/news_grid.html" with news_list=news_list %}

  <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ -->
  {% include "includes/pagination.html" with page_obj=page_obj %}

<script>
  // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  document.addEventListener('DOMContentLoaded', function() {
    const categoryFilter = document.querySelector('.category-filter');
    if (categoryFilter) {
      setTimeout(() => {
        categoryFilter.style.opacity = '1';
        categoryFilter.style.transform = 'translateY(0)';
      }, 300);
    }
  });
</script>
{% endblock %}