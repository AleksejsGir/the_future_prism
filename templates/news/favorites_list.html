<!-- templates/news/favorites_list.html -->
{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "–ò–∑–±—Ä–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏" %} | {% trans "The Future Prism" %}{% endblock %}

{% block content %}
<div class="container mx-auto p-4 md:p-8">
  <div class="text-center mb-8">
    <h1 class="text-3xl font-bold neon-text">{% trans "–ò–∑–±—Ä–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏" %}</h1>
    {% if messages %}
      {% for message in messages %}
        <div class="mt-4 p-4 rounded-lg {% if message.tags == 'success' %}bg-green-500/20{% else %}bg-red-500/20{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞) -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
    {% for news in news_list %}
      <a href="{% url 'news_detail' news.id %}"
         class="news-card transition-all duration-300 block"
         style="--card-index: {{ forloop.counter0 }};">
        {% if news.image %}
          <img src="{{ news.image.url }}"
               alt="{{ news.title }}"
               class="w-full h-48 object-cover rounded-lg mb-3">
        {% endif %}

        <h2 class="text-xl font-semibold">
          {{ news.title }}
        </h2>

        <div class="mt-2 text-gray-300 news-preview">
          {{ news.content|striptags|truncatewords:20 }}
        </div>

        {% if news.category %}
          <span class="text-sm text-gray-400 block mt-4">
            {{ news.category.icon|default:'üè∑Ô∏è' }} {{ news.category.name }}
          </span>
        {% endif %}
      </a>
    {% empty %}
      <div class="col-span-full text-center p-8">
        <p class="text-gray-400">{% trans "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π" %}</p>
        <a href="{% url 'news_list' %}" class="mt-4 inline-block neon-button px-4 py-2">
          {% trans "–ü–µ—Ä–µ–π—Ç–∏ –∫ –Ω–æ–≤–æ—Å—Ç—è–º" %}
        </a>
      </div>
    {% endfor %}
  </div>
</div>

<script>
  // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ HTML-—Å–∏–º–≤–æ–ª–æ–≤
  document.addEventListener('DOMContentLoaded', function() {
    const previews = document.querySelectorAll('.news-preview');
    previews.forEach(preview => {
      preview.innerHTML = preview.innerHTML
        .replace(/&lt;/g, '<')
        .replace(/&gt;/g, '>')
        .replace(/&amp;/g, '&')
        .replace(/&quot;/g, '"')
        .replace(/&#39;/g, "'")
        .replace(/&nbsp;/g, ' ');
    });
  });
</script>
{% endblock %}